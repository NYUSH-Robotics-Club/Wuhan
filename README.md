# VEXCODE-2024-2025
CPSLO VexCode 2024-2025

## 机器人配置

此项目支持两种不同的机器人配置：

### GREEN配置（主配置）
- **驱动电机**: 
  - 左侧: PORT1-PORT4 (比例 6:1)
  - 右侧: PORT5-PORT8 (比例 6:1)
- **进料系统**: 
  - 滚轮: PORT11 (比例 18:1)
  - 传送带: PORT12 (比例 18:1)
- **壁桩系统**: 
  - 左电机: PORT13 (比例 36:1)
  - 右电机: PORT14 (比例 36:1)
  - 旋转传感器: PORT15
- **气动系统**:
  - 移动目标机构: Brain.ThreeWirePort.H
  - 推杆右: Brain.ThreeWirePort.G
  - 推杆左: Brain.ThreeWirePort.F
- **传感器**:
  - 颜色检测: PORT19 (光学传感器)
  - 距离传感器: PORT20
  - IMU陀螺仪: PORT21

### GOLD配置（备用配置）
- 金色机器人的备用端口配置

## 编译配置

在 `makefile` 中默认使用GREEN配置：
```makefile
CPPFLAGS += -DGREEN
# CPPFLAGS += -DGOLD
```

## 🎮 遥控器操作键位

### **肩部按键**
| 按键 | 功能 | 详细说明 |
|------|------|----------|
| **L1** | 进料系统正转 | 启动滚轮和传送带正转，同时启用环检测覆盖 |
| **L2** | 进料系统反转 | 按下时反转，释放时停止 |
| **R1** | 壁桩状态切换 | 循环切换：装载(14°) → 预得分(68°) → 得分(60°) |
| **R2** | 移动目标机构 | 开关移动目标抓取机构，带震动反馈 |

### **方向键**
| 按键 | 功能 | 详细说明 |
|------|------|----------|
| **⬆️ Up** | 蓝方模式 | 设置为蓝方机器人，丢弃红色环 |
| **⬇️ Down** | 右侧推杆 | 切换右侧推杆气动装置 |
| **⬅️ Left** | 红方模式 | 设置为红方机器人，丢弃蓝色环 |
| **➡️ Right** | 翻转器 | 切换翻转器气动装置 |

### **面部按键**
| 按键 | 功能 | 详细说明 |
|------|------|----------|
| **A** | 自动进料 | 持续进料直到检测到环，带震动提示 |
| **B** | 左侧推杆 | 切换左侧推杆气动装置 |

### **摇杆控制**
| 摇杆 | 功能 | 详细说明 |
|------|------|----------|
| **左摇杆** | 底盘驱动 | 街机式控制（前进后退+转向） |
| **右摇杆Y轴** | 手动壁桩 | 直接控制壁桩电机，覆盖自动控制 |

### **壁桩系统角度设置**
| 状态 | GREEN角度 | GOLD角度 | 功能 |
|------|-----------|----------|------|
| **装载** | 14° | 14° | 装载环的位置 |
| **预得分** | 68° | 68° | 准备得分位置 |
| **得分** | 60° | 60° | 最终得分位置 |

### **颜色检测系统**
- **LED亮度**: 25%（节能优化）
- **红色检测**: 350-10度色调范围
- **蓝色检测**: 205-225度色调范围
- **自动分拣**: 根据阵营设置自动丢弃错误颜色的环

### **自动程序选择**
- **Brain屏幕点击**: 循环切换自动程序
- **X键**: 锁定选择并校准陀螺仪
- **Y键**: 解锁自动程序选择

## 项目结构

```
VEXCODE-2024-2025/
├── src/                    # 源代码目录
│   ├── main.cpp           # 主程序文件
│   ├── robot-config.cpp   # 机器人配置
│   └── autons.cpp         # 自动程序
├── include/               # 头文件目录
│   ├── robot-config.h     # 机器人配置头文件
│   └── autons.h          # 自动程序头文件
├── JAR-Template/          # 底盘驱动系统库
└── vex/                   # VEX编译配置
```

## 功能特性

- **高级底盘控制**: 使用JAR-Template库实现精确的位置追踪和PID控制
- **智能颜色分拣**: 自动识别环颜色并根据阵营进行分拣
- **多状态壁桩系统**: 支持装载、预得分、得分多种状态
- **完整的自动程序**: 支持红蓝双方多种策略
- **气动系统控制**: 移动目标机构和推杆系统
- **传感器集成**: IMU、光学传感器、距离传感器等
